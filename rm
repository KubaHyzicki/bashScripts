#!/usr/bin/env bash
#_source

#hmmm pomysł wyszedł z wypadku użycia rm -rf na złym folderze, a dokładnie miał to być subfolder...nic się strasznego nie stało, ale na przyszłość można zrobić rm, który oprócz usunięcia robi backup ostatnio usuniętych rzeczy

#dla dużych rzeczy kopiowanie może być problematyczne więc zamiast kopiować można przenosić do np. ~/.rm_backup/
#a dokładniej:

export backup=~/Documents/rm_backup

clean(){
	cd $backup
	for file in `git ls-files | sed '/\..*/d'`
	do
		time=`stat $file | grep Modify | sed 's/Modify: //' | sed 's/:..\..*//' | sed 's/[- :]//g'`
		echo "$file $time"
		#if [[ `ls | wc -l` -ge 11 ]] ;then break ;fi
	done
	#for x in `ls`
	#do
	#	\rm -rf $x
	#done
}

remove(){
	#args=$2
	mv $1 $backup/$1
}

if [[ ! -d "$backup" ]]
then
	mkdir $backup
fi
clean
args=''
if [[ ${1::1} == "-" ]]
then
	args=${1:1}
	shift
	echo "I actually do not need any args..."
fi
for x in $@
do
	#remove $x $args
done

#dodać licznik plików w folderze backupu by usuwało najwcześniej dodane jeśli ilość w folderze przekroczy np. 10

